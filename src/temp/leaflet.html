<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realtime location tracker</title>

    <!-- leaflet css  -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />


    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            width: 100%;
            height: 50vh;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <div class="lor"></div>
</body>
</html>


<!-- leaflet js  -->
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

<script>
    // Map initialization 
    var map = L.map('map').setView([34.79, 48.52], 15);

    var geocoder = L.Control.geocoder({
    // defaultMarkGeocode: false
    })
    .on('markgeocode', function(e) {
        var bbox = e.geocode.bbox;
        var poly = L.polygon([
        bbox.getSouthEast(),
        bbox.getNorthEast(),
        bbox.getNorthWest(),
        bbox.getSouthWest()
        ]).addTo(map);
        map.fitBounds(poly.getBounds());
    })
  .addTo(map);



    var tileLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png' , {attribution: "OSM"}).addTo(map);

    var marker = L.marker([34.79, 48.52]).addTo(map);

    map.on('click', function(e){
        var secondMarker = L.marker([e.latlng.lat , e.latlng.lng]).addTo(map);


        L.Routing.control({
        waypoints: [
            L.latLng(34.79, 48.52),
            L.latLng(e.latlng.lat , e.latlng.lng)
        ]
        }).addTo(map);
    });

    // L.Control.geocoder().addTo(map);



    
//     L.Routing.control({
//   waypoints: [
//     L.latLng(57.74, 11.94),
//     L.latLng(57.6792, 11.949)
//   ]
// }).addTo(map);

    //osm layer
    // var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    //     attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    // });
    // osm.addTo(map);

//     googleStreets = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',{
//     maxZoom: 20,
//     subdomains:['mt0','mt1','mt2','mt3']
// });
//     // googleStreets.addTo(map);


//     googleSat = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
//     maxZoom: 20,
//     subdomains:['mt0','mt1','mt2','mt3']
// });

//     L.marker([34.79, 48.52]).addTo(map);

//     var myIcon = L.icon({
//         iconUrl: './download-removebg-preview.png',
//         iconSize: [40, 40],
//     })

//     var singleMarker = L.marker([34.79, 48.52],{icon: myIcon,draggable:true})
//     var popup = singleMarker.bindPopup("this is hamedam" + singleMarker.getLatLng()).openPopup();
//     popup.addTo(map)


//     console.log(singleMarker.toGeoJSON());

//     map.on('mousemove', function(e){
//         document.getElementsByClassName('lor')[0].innerHTML = 'lat ' + e.latlng.lat  + '  lng ' + e.latlng.lng;
//         console.log('lat ' + e.latlng.lat ,'lng ' + e.latlng.lng);
//     })








    
    // googleSat.addTo(map);
    // if(!navigator.geolocation) {
    //     console.log("Your browser doesn't support geolocation feature!")
    // } else {
    //     setInterval(() => {
    //         navigator.geolocation.getCurrentPosition(getPosition)
    //     }, 5000);
    // }
    // var marker, circle;

</script>